@page "/calendar"
<h3>Calendar</h3>

<button @onclick="GoToPrevMonth">Föregående månad</button>
<h1>@monthName @year</h1>
<button @onclick="GoToNextMonth">Nästa månad</button>

<section>
    @for (int i = 0; i < numDummyColumn - 1; i++)
    {
        <div></div>
    }
    @for (int i = 1; i < monthEnd.Day; i++)
    {
        <div>@i</div>
    }
</section>


@code {
    string monthName = string.Empty;
    DateTime monthEnd;
    string year = string.Empty;
    int numDummyColumn = 0;
    int monthsAway = 0;
    int yearsAway = 0;

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        await CreateMonth(monthsAway);

    }

    public async Task GoToPrevMonth()
    {
        monthsAway--;
        await CreateMonth(monthsAway);
    }

    public async Task GoToNextMonth()
    {
        monthsAway++;
        await CreateMonth(monthsAway);
    }

    public async Task CreateMonth(int monthsAwayFromNow)
    {

        year = DateTime.UtcNow.AddMonths(monthsAwayFromNow).Year.ToString();

        DateTime monthStart = new DateTime(DateTime.UtcNow.Year, DateTime.UtcNow.Month, 1)
            .AddMonths(monthsAway);
        monthEnd = monthStart
            .AddMonths(1)
            .AddDays(-1);

        monthName = monthStart.Month switch
        {
            1 => "Januari",
            2 => "Februari",
            3 => "Mars",
            4 => "April",
            5 => "Maj",
            6 => "Juni",
            7 => "Juli",
            8 => "Augusti",
            9 => "September",
            10 => "Oktober",
            11 => "November",
            12 => "December",
            _ => ""
        };

        numDummyColumn = (int)monthStart.DayOfWeek;
    }

}